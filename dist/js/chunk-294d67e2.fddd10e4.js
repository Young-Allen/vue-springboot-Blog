(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-294d67e2"],{5843:function(t,e,i){"use strict";i("9a80")},"7cf6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqRJREFUWEftlUuIzWEYxn9PSWkWbknGbiiMJEozYjEWFA2xGHdjYeGycNko2bBxSdiNkY2IcSnKZYGNW+4LiixcRsrIAith9ejVd/Sf45w550zHzMK89e/8zzlf7/O8z/s+7yf6OdTP+AwQ+P8UsF0n6W1u9vpMAdvTgJVAk6QZfUbAdlMCDvAaYLWkU/+cgO3FCbgla3VJ3VSvegtsr03A8/J2zB3gp6S53QhVYxHZHgxsSMANKed5IKp/DywD7gPNkq5WjYDtUcBGYAUwMZN4BPAFuAssT0QO58sf53vVAtvjEvAq4LukOttP4h3YCsT7aUnxP7YfA52SluYrXhEB29MzwO+A+cAU4DJwDLgBnAP2SdqRwMcAXcAsSfd6RcD2nAQcPX0KbJF02/aR1PtmYDKwH9gkKX7/HbaDyJ5C8pdsQbJS9Dgm+iHQJumE7UYghqxLUoPtdmA9sFDSlWyVtp/HLEiKIf0rCrbAdmuqOIBuAUcldaSKtqdKDwB7gbPABGCRpGd54Dn56yW97JGA7UEJNCqeBFwH2iVdTMDR/91hpagUiH1+CfiYwL/mA9jeldo1vJjdZXtkBrgW+AC8AV5nPuP36O8LYEnqd0jdkZv0QgC2I88ZSTuLEsgMy7Dk5fBzPPVJifHpzCMgtlhYqy076UXAc/LXSgqVCkZJG9oem+wWNouL5SbwCRgNvEoWvCYpWvYnkvxrJMXOKBolCWQUiiUT9toWlrLdCcTQDU3E4miQuJCesOshSQerRSCu0LhSI44Ds4FGSZ/TkIY6sSfiiRUdMUTSj2oRiEvmQSbZTEnZ71n5g0CLpJiVHqPsFqQq4yZbALRKOlkqeTn/V0pgHTBV0uZykpdzplICNZK+lZO43DMVESg3aSXnBggMKPAL07HnIaMXB2AAAAAASUVORK5CYII="},8139:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"all"},[e("div",{staticClass:"AsideNav"},[e("div",{staticClass:"userInfor"},[e("div",{staticClass:"avaAndNickname"},[e("div",{staticClass:"ava"},[e("el-image",{staticStyle:{width:"70px",height:"70px","border-radius":"50%",flex:"1"},attrs:{src:t.author.avatarUrl},on:{click:function(e){return t.$router.push("/front/personalCenter/newArticleOfPersonal?id="+t.author.id)}}})],1),e("div",{staticClass:"nicknameOfUser"},[e("div",{staticStyle:{"font-size":"14px",flex:"1",display:"flex","align-items":"center","margin-left":"10px"}},[t._v(" "+t._s(t.author.nickname)+" ")]),e("div",{staticStyle:{"font-size":"10px",color:"#999AAA",flex:"1",display:"flex","flex-direction":"column","justify-content":"center","margin-left":"10px"}},[t._m(0),e("div",{staticStyle:{"font-size":"10px"}},[t._v(" "+t._s(t.author.email)+" ")])])])]),e("div",{staticClass:"ArticleInforOfUser"},[e("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","flex-direction":"column","text-align":"center"}},[t._m(1),e("div",{staticStyle:{flex:"1"}},[t._v("总被浏览量")]),e("div",{staticStyle:{flex:"1"}},[t._v(t._s(t.readNumber))])]),e("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","flex-direction":"column","text-align":"center"}},[t._m(2),e("div",{staticStyle:{flex:"1"}},[t._v("被收藏数")]),e("div",{staticStyle:{flex:"1"}},[t._v(t._s(t.collectedNumber))])])])]),e("div",{staticClass:"articleOfUser"},[t._m(3),e("div",{staticStyle:{flex:"16"}},t._l(t.tableData,(function(i){return e("div",{key:i.id,staticClass:"theTitleOfArticle2",staticStyle:{"margin-top":"2px","padding-top":"10px"}},[e("div",{staticClass:"article-head",staticStyle:{cursor:"pointer",margin:"0px 5px","line-height":"22px",height:"22px","text-overflow":"ellipsis",overflow:"hidden",color:"#000","font-weight":"normal"},on:{click:function(e){return t.pushPage(i.id)}}},[t._v(t._s(i.name))]),e("div",{staticStyle:{height:"40px",overflow:"hidden","text-overflow":"ellipsis",color:"#999999","word-break":"break-all","font-size":"14px","padding-left":"5px"}},[t._v(" "+t._s(i.summary)+" ")])])})),0)])]),e("div",{staticClass:"articleDetail"},[e("div",{staticClass:"headOfArticle"},[e("div",{staticClass:"head"},[e("div",{staticStyle:{flex:"8"}},[e("h1",[t._v(t._s(t.article.name))])]),e("div",{staticStyle:{flex:"1"}},[t.showSign?t._e():e("el-button",{attrs:{type:"primary",round:""},on:{click:t.collectArticle}},[t._v("收藏文章")]),t.showSign?e("el-button",{attrs:{type:"primary",round:""},on:{click:t.deleteCollection}},[t._v("取消收藏")]):t._e()],1)]),e("div",{staticClass:"tip"},[e("div",{staticClass:"timeAndUser",staticStyle:{flex:"1"}},[e("i",{staticClass:"el-icon-user-solid"}),t._v(" "),e("span",[t._v(t._s(t.article.user))]),e("span",[t._v(" 于 "),e("i",{staticClass:"el-icon-time"}),t._v(t._s(t.article.time)+" 发布")])]),e("div",{staticClass:"classification",staticStyle:{flex:"1",display:"flex"}},[t._v(" 文章标签:"),e("span",{staticStyle:{"align-items":"center",flex:"1","margin-left":"10px"}},[e("i",{staticStyle:{"background-color":"rgba(64,158,255,0.2)",padding:"0 10px","border-radius":"5px"}},[t._v(t._s(t.article.type))])])])])]),e("div",{staticClass:"bodyOfArticle"},[e("mavon-editor",{staticClass:"md",staticStyle:{background:"#FFFFFF"},attrs:{value:t.article.content,subfield:!1,boxShadow:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0}})],1),e("div",{staticClass:"replyOfArticle"},[e("h2",[t._v("评论")]),e("div",{staticClass:"releaseComment"},[e("el-image",{staticStyle:{width:"70px",height:"70px","border-radius":"50%","margin-top":"30px",flex:"1"},attrs:{src:t.user.avatarUrl}}),e("div",{staticStyle:{flex:"12",display:"flex",gap:"5px","padding-bottom":"50px"}},[e("el-input",{staticStyle:{"margin-top":"30px",flex:"20","font-size":"16px"},attrs:{type:"textarea",rows:"3",placeholder:"一定要说正确的话哦，争议评论将被删除"},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}}),e("el-button",{staticStyle:{flex:"1","margin-top":"30px"},attrs:{round:"",type:"primary"},on:{click:t.save}},[e("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",width:"50px",height:"50px"}},[e("div",{staticStyle:{flex:"1",display:"flex",height:"25px",width:"50px","justify-content":"center","align-items":"center"}},[e("div",{staticStyle:{flex:"1"}},[t._v(" 发 ")]),e("div",{staticStyle:{flex:"1"}},[t._v(" 表 ")])]),e("div",{staticStyle:{flex:"1",display:"flex",height:"25px",width:"50px","justify-content":"center","align-items":"center"}},[e("div",{staticStyle:{flex:"1"}},[t._v(" 评 ")]),e("div",{staticStyle:{flex:"1"}},[t._v(" 论 ")])])])])],1)],1),t._l(t.comments,(function(i){return e("div",{key:i.id,staticClass:"replyItemList"},[e("el-image",{staticStyle:{width:"70px",height:"70px","border-radius":"50%","margin-top":"30px",flex:"1"},attrs:{src:i.avatarUrl}}),e("div",{staticClass:"replyItemListContent"},[e("div",{staticStyle:{flex:"1","font-size":"12px",color:"#6D757A"}},[t._v(" "+t._s(i.nickname)+": ")]),e("div",{staticStyle:{flex:"3",color:"#222222",padding:"10px 0px","font-size":"14px"}},[e("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis",height:"auto","word-break":"break-all"}},[t._v(t._s(i.content))])]),e("div",{staticStyle:{flex:"1","font-size":"12px",color:"#99A2AA",display:"flex"}},[e("span",{staticStyle:{"margin-left":"10px",flex:"1"}},[t._v(t._s(i.time))]),e("div",{staticStyle:{flex:"5"}},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.handleReply(i.id)}}},[t._v("回复")]),t.user.id===i.userId?e("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:function(e){return t.del(i.id)}}},[t._v("删除")]):t._e()],1)]),i.children.length?e("div",{staticClass:"childrenRpelyList"},t._l(i.children,(function(i){return e("div",{key:i.id,staticClass:"childrenOfReply",staticStyle:{flex:"1"}},[e("div",{staticStyle:{flex:"1",display:"flex"}},[e("el-image",{staticStyle:{width:"30px",height:"30px","border-radius":"50%",flex:"1"},attrs:{src:i.avatarUrl}})],1),e("div",{staticStyle:{flex:"28",display:"flex","flex-direction":"column"}},[e("div",{staticStyle:{display:"flex"}},[e("span",{staticStyle:{flex:"1","font-size":"12px","text-align":"center","margin-top":"5px",color:"#6D757A"}},[t._v(t._s(i.nickname))]),i.pnickname?e("div",{staticStyle:{flex:"2","font-size":"12px",color:"#409EFF",padding:"5px 10px"}},[e("span",{staticStyle:{"margin-right":"5px",color:"#6D757A"}},[t._v("回复")]),t._v(" @"+t._s(i.nickname)+": ")]):t._e(),e("div",{staticStyle:{display:"flex",flex:"18"}},[e("span",{staticStyle:{"font-size":"12px","margin-top":"5px"}},[t._v(t._s(i.content))])])]),e("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-items":"center","margin-top":"10px"}},[e("span",{staticStyle:{"margin-left":"10px",flex:"1","font-size":"12px",color:"#6D757A"}},[t._v(t._s(i.time))]),e("div",{staticStyle:{flex:"5",display:"flex","padding-left":"5px"}},[e("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(e){return t.handleReply(i.id)}}},[t._v("回复")]),t.user.id===i.userId?e("el-link",{staticStyle:{"font-size":"12px","margin-left":"20px"},attrs:{type:"danger"},on:{click:function(e){return t.del(i.id)}}},[t._v("删除")]):t._e()],1)])])])})),0):t._e()])],1)}))],2),e("el-dialog",{attrs:{title:"回复",visible:t.dialogFormVisible,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"回复内容"}},[e("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.commentForm.contentReply,callback:function(e){t.$set(t.commentForm,"contentReply",e)},expression:"commentForm.contentReply"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},s=[function(){var t=this,e=t._self._c;return e("i",{staticClass:"el-icon-message"},[e("span",[t._v("邮箱:")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"1"}},[e("i",{staticClass:"el-icon-view"})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"1"}},[e("i",{staticClass:"el-icon-tickets"})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{flex:"2",display:"flex","align-items":"center","background-color":"#409EFF"}},[e("div",{staticStyle:{flex:"1",display:"flex","justify-items":"center","align-items":"center","background-color":"#409EFF"}},[e("div",{staticStyle:{flex:"10","text-align":"left",color:"#FFFFFF","font-size":"16px","margin-left":"10px"}},[t._v(" 他的文章 ")]),e("div",{staticStyle:{flex:"1"}},[e("img",{attrs:{src:i("7cf6")}})])])])}],a={name:"ArticleDetail",data(){return{author:localStorage.getItem("author")?JSON.parse(localStorage.getItem("author")):{},nextauthor:{},article:{},user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},comments:[],commentForm:{},id:this.$route.query.id,dialogFormVisible:!1,tableData:[],collectInformation:{},collectInformationArticlid:[],showSign:!1,readNumber:0,collectedNumber:0}},created(){this.load(),this.loadComment(),this.loadDataOfAuthor(),this.rec_article(),this.loadCollectInArticleId()},mounted(){this.loadReadNumber(),this.loadCollectedNumber()},watch:{$route(t,e){this.$router.go(0)}},methods:{loadCollectedNumber(){this.request.get("/user//findCollectionNumber/"+this.author.id).then(t=>{this.collectedNumber=t.data})},load(){this.request.get("/article/"+this.id).then(t=>{this.article=t.data})},loadComment(){this.request.get("/comment/tree/"+this.id).then(t=>{this.comments=t.data})},loadDataOfAuthor(){this.request.get("/user/findUserInfor/"+this.id).then(t=>{this.author=t.data,localStorage.removeItem("author"),localStorage.setItem("author",JSON.stringify(t.data))})},save(){this.user.id?(this.commentForm.articleId=this.id,this.commentForm.contentReply&&(this.commentForm.content=this.commentForm.contentReply),this.request.post("/comment",this.commentForm).then(t=>{"200"===t.code?(this.$message.success("评论成功"),this.commentForm={},this.loadComment(),this.dialogFormVisible=!1):this.$message.error(t.msg)})):this.$message.warning("请登录后操作")},del(t){this.request.delete("/comment/"+t).then(t=>{"200"===t.code?(this.$message.success("删除成功"),this.loadComment()):this.$message.error("删除失败")})},pushPage(t){this.$router.push("/front/articleDetail?id="+t)},handleReply(t){this.commentForm={pid:t},this.dialogFormVisible=!0},rec_article(){this.request.get("/user/findUserInfor/"+this.id).then(t=>{this.nextauthor=t.data,this.request.get("/article/pageOfUsersArticle",{params:{id:this.nextauthor.id}}).then(t=>{this.tableData=t.data})})},loadReadNumber(){this.request.get("/user/findReadNumber/"+this.author.id).then(t=>{this.readNumber=t.data})},collectArticle(){this.collectInformation.userid=this.user.id,this.collectInformation.articleid=this.id,this.collectInformation.authorid=this.author.id,this.request.post("/collection",this.collectInformation).then(t=>{"200"==t.code&&(this.$message.success("收藏成功！"),this.collectInformation={},this.load(),this.loadComment(),this.loadDataOfAuthor(),this.rec_article(),this.loadCollectInArticleId())})},loadCollectInArticleId(){this.request.get("/collection/aticleId/"+this.user.id).then(t=>{this.collectInformationArticlid=t.data,console.log(t.data);for(let e=0;e<this.collectInformationArticlid.length;e++)if(console.log(this.collectInformationArticlid[e]),console.log(this.id+""),this.collectInformationArticlid[e]==this.id)return this.showSign=!0,!0})},deleteCollection(){this.request.delete("/collection/del/"+this.id+"/"+this.user.id).then(t=>{"200"==t.code&&(this.$message.success("取消收藏成功！"),this.showSign=!this.showSign)})}}},r=a,o=(i("5843"),i("2877")),c=Object(o["a"])(r,l,s,!1,null,"5aec8c92",null);e["default"]=c.exports},"9a80":function(t,e,i){}}]);
//# sourceMappingURL=chunk-294d67e2.fddd10e4.js.map