(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76a46b22"],{"2b44":function(t,e,i){},"707e":function(t,e,i){"use strict";i("2b44")},"77e5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"absolute",width:"100%",height:"100%"}},[e("div",{staticStyle:{position:"sticky",top:"0px","z-index":"999"}},[e("div",{staticStyle:{height:"60px","background-color":"rgb(251,251,251)"}},[t._m(0),e("div",{staticClass:"title"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.article.name,expression:"article.name"}],attrs:{type:"text"},domProps:{value:t.article.name},on:{input:function(e){e.target.composing||t.$set(t.article,"name",e.target.value)}}})]),e("div",{staticClass:"release"},[e("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"#3F5EFB",title:"您确认发表这篇文章吗？"},on:{confirm:t.ArticleRelease}}),e("el-button",{staticStyle:{width:"100px",height:"40px","border-radius":"23px","font-size":"14px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleEdit}},[e("i",{staticClass:"el-icon-position"}),t._v(" 发布文章")])],1),e("div",{staticClass:"touxiang"},[e("el-dropdown",{staticStyle:{cursor:"pointer","text-align":"center"},attrs:{placement:"bottom"}},[e("div",{staticStyle:{display:"inline-block"}},[e("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%","margin-top":"10px"},attrs:{src:t.user.avatarUrl,alt:""}})]),e("el-dropdown-menu",{staticStyle:{width:"100px","margin-left":"10px","text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},[e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/front/editMaterial/ArticleCommand"}},[e("el-dropdown-item",{staticStyle:{"font-size":"14px",padding:"5px 0"}},[t._v(" 博客管理 ")])],1),e("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/front"}},[e("el-dropdown-item",{staticStyle:{"font-size":"14px",padding:"5px 0"}},[e("span",[t._v("返回首页")])])],1)],1)],1)],1)])]),e("div",{staticStyle:{width:"100%",height:"100%"}},[e("div",{staticStyle:{height:"100%",width:"100%"}},[e("mavon-editor",{ref:"md",staticStyle:{height:"100%",width:"100%"},attrs:{ishljs:!0,scrollStyle:!0},on:{imgAdd:t.imgAdd},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}})],1)]),e("el-dialog",{attrs:{title:"文章信息",visible:t.dialogFormVisible,width:"30%",fullscreen:"true"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"article",attrs:{"label-width":"80px",model:t.article}},[e("el-form-item",{attrs:{label:"文章类型"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.article.typeid,callback:function(e){t.$set(t.article,"typeid",e)},expression:"article.typeid"}},t._l(t.articleTypes,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"文章概述"}},[e("el-input",{attrs:{type:"textarea",rows:"5",maxlength:"50","show-word-limit":"",autocomplete:"off"},model:{value:t.article.summary,callback:function(e){t.$set(t.article,"summary",e)},expression:"article.summary"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticStyle:{width:"70px",height:"40px"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{staticStyle:{width:"70px",height:"40px"},attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")])],1)],1)],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"PersonalCenter"},[e("a",{attrs:{href:"/front/editMaterial/ArticleCommand"}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" 文章管理")])])}],s=i("bc3a"),r=i.n(s),o={name:"ArticleRelease",data(){return{textarea:"请输入标题",user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{username:""},article:{},dialogFormVisible:!1,articleTypes:[]}},created(){this.loadArticleType()},methods:{handleSave(){const t=this.article;t.userid=this.user.id,this.request.post("/article",t).then(t=>{console.log(t),t?(this.$message.success("发布成功，请到个人中心查看！"),this.$router.push("/front")):this.$message.error("发布失败！"),this.dialogFormVisible=!1,this.form={},this.load()})},imgAdd(t,e){let i=this.$refs.md;const a=new FormData;a.append("file",e),r()({url:"http://localhost:9090/file/upload",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.$img2Url(t,e.data)})},ArticleRelease(){this.article.userid=this.user.id,this.request.post("/article",this.article).then(t=>{console.log(t),t?(this.$message.success("发布成功！请前往个人中心查看。"),this.$router.push("/front")):this.$message.error("发布失败！")})},handleEdit(){this.dialogFormVisible=!0},loadArticleType(){this.request.get("/type").then(t=>{this.articleTypes=t.data})}}},n=o,c=(i("707e"),i("2877")),d=Object(c["a"])(n,a,l,!1,null,"2bc859b4",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-76a46b22.aadeab1b.js.map